---
title: Sensor Data
project: riak
version: 1.4.2+
document: cookbook
toc: true
audience: intermediate
keywords: [use-cases]
---

## 简单用例

Riak 的可扩放性设计使得其特别适合处理迅速增多的数据（例如传感器数据），处理频繁的读写操作。很多传感器都会在一个时间段收集然后发送数据。在 Riak 中，建模的方法之一是为每个传感器创建一个 bucket，使用时间间隔（例如日期，或者日期加时间）作为唯一的键，然后存储收集来的数据，然后可以按照时间段查询数据，或者把时间戳存储为二级索引，在某个时间范围内查询，或在索引上执行 MapReduce 查询。

## 复杂用例

如果要处理成千上万的传感器，但数据量却很少，把每个传感器的数据存储在一个唯一的键中就显得太复杂了，特别是在读出传感器数据时，需要处理大量的键。相反的，我们可以把一个传感器收集的数据存在一个文档中，然后使用一个唯一键来识别这个传感器。如果存为 JSON 格式的文档，就可以在客户端读取并解析数据。不过，如果不先读出对象是无法向文档附加数据的。这种策略把读取操作简化了，性能也提高了，但客户端写入时却要做更多的工作。而且还要时时关注文档的总量，我们建议使用合理的对象数量限制（3-4MB），避免集群的性能下降。
